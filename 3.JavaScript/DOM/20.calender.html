<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <style>
      .calculator {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 10px;
        max-width: 300px;
        margin: 0 auto;
        text-align: center;
      }
      .calculator input {
        grid-column: span 4;
        padding: 10px;
      }
      .calculator button {
        padding: 10px;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <div class="calculator">
      <input type="text" id="result" readonly />
      <button onclick="appendSymbol(this.innerText)">+</button>
      <button onclick="appendSymbol(this.innerText)">-</button>
      <button onclick="appendSymbol(this.innerText)">*</button>
      <button onclick="appendSymbol(this.innerText)">/</button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        7
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        8
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        9
      </button>
      <button onclick="calculate()">=</button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        4
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        5
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        6
      </button>
      <button onclick="clearResult()">C</button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        1
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        2
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        3
      </button>
      <button onclick="document.getElementById('result').value+=this.innerText">
        0
      </button>
    </div>
    <script>
      function appendNumber(number) {
        document.getElementById("result").value += number;
      }

      function isSymbol(value) {
        //if(value === '+' || value === '-' || value === '*' || value === '/'){
        //    return true;
        //}else{
        //    return false;
        //}
        return ["+", "-", "*", "/"].includes(value);
      }

      function appendSymbol(symbol) {
        const resultDOM = document.getElementById("result");
        const latInput = resultDOM.value[resultDOM.value.length - 1];
        //TODO:이 카에 있는 이전 글자가 무엇인가?
        //그래서, 그게 숫자였으면 심볼을 더할 수 있음
        // 근데, 그게 심볼이었으면 심볼을 더할 수 있음
        if (isSymbol(lastInput)) {
          //같은거 중복 심볼 입력 방지.. 어떠한 심볼이던지..
          console.log(lastInput, symbol);
          resultDOM.value = resultDOM.value.slice(0, -1) + symbol;
        } else {
          resultDOM.value += symbol;
        }
      }
      function calculate() {
        const resultDOM = document.getElementById("result");
        const lastInput = resultDOM.value[resultDOM.value.length - 1];
        if (isSymbol(lastInput)) {
          //R
          //resultDOM.value=resultDOM.value.slice(0,-1);
          resultDOM.value = "ERROR";
          return;
        }
        const result = eval(resultDOM, value);
        resultDOM.value = result;
      }
      function clearResult() {
        document.getElementById("result").value = "";
      }
    </script>
  </body>
</html>
